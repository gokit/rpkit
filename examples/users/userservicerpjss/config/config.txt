// GetByService returns a middleware-aware function which services
// server-basd requests for the GetByContract method.
export function GetByService(GetByContract, Encoder, Decoder) {
    if (Encoder && typeof Encoder.Encode !== "function") {
        throw new Error("Encoder must provide Encoder function");
    }

    if (Decoder && typeof Decoder.Decode !== "function") {
        throw new Error("Decoder must provide Decode function");
    }

    return function GetByServviceMiddleware(req, res, next) {
        if (["HEAD", "POST"].indexOf(req.method) === -1) {
            res.statusCode = http.NotAllowed;
            Encoder.Encode(res, JSONErrorResponse(MethodTypeError,
                http.BadRequest,
                "method not served",
                "not servicing method, only posts or head", {
                    url: req.url,
                    headers: req.headers,
                    method: req.method,
                }));
            res.end();
            return
        }




        if (next && typeof next == "function") next();
    }
}